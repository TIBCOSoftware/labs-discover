!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Uxpl={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var s=l(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return u(this,n)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(n):s.value}})(e,t,n||e)}function p(e,t,n,i){return v(e,t,(function(e){var t=e.target.closest(n);t&&i(t,e)}),!1)}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.addEventListener.apply(e,n),function(){e.removeEventListener.apply(e,n)}}var f=function(){function e(){n(this,e),o(this,"listeners",void 0),this.listeners={}}return s(e,[{key:"addEventListener",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))}},{key:"dispatchEvent",value:function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))}},{key:"clearAll",value:function(){this.listeners={}}}]),e}();function m(e,t){if((n=e)&&1===n.nodeType)return e;var n,i=t.parent,s=t.selector,o=t.throwIfNotFound,a=i.querySelector(s);if(!a&&o)throw new Error(o);return a}function b(e){var t=e.parent,n=e.selector,i=e.throwIfNotFound,s=t.querySelector(n);if(!s&&i)throw new Error(i);return s}function y(e,t){var n=e.getAttribute(t);n="true"===n?"false":"true",e.setAttribute(t,n)}var _=function(e){return e()},g=function(){function e(){n(this,e),o(this,"eventDispatcher",void 0),o(this,"eventDisposers",void 0),this.eventDispatcher=new f,this.eventDisposers=[]}return s(e,[{key:"addEventListener",value:function(e,t){this.eventDispatcher.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.eventDispatcher.removeEventListener(e,t)}},{key:"destroy",value:function(){this.eventDispatcher.clearAll(),this.eventDisposers.forEach(_)}}]),e}(),E='[data-pl-dropdown-role="toggler"]',k='[data-pl-dropdown-role="target"]',w=function(){function e(t,i){n(this,e),o(this,"dropdown",void 0),o(this,"toggler",void 0),o(this,"target",void 0),o(this,"shownClass",void 0),o(this,"dispatcher",void 0),o(this,"currentDocumentListener",null),this.dropdown=t,i=i||{},this.toggler=this.__resolveElement(i.toggler,this.dropdown,E),this.target=this.__resolveElement(i.target,this.dropdown,k),this.shownClass="is-shown",this.dispatcher=new f,this.__init()}return s(e,[{key:"addEventListener",value:function(e,t){this.dispatcher.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.dispatcher.removeEventListener(e,t)}},{key:"destroy",value:function(){this.dropdown=null,this.toggler=null,this.target=null,this.currentDocumentListener=null,this.dispatcher.clearAll()}},{key:"isOpen",value:function(){return this.target&&this.target.classList&&this.target.classList.contains(this.shownClass)}},{key:"closeDropdown",value:function(){this.dispatcher.dispatchEvent("beforeHide",this),this.target.classList.remove(this.shownClass),this.dispatcher.dispatchEvent("afterHide",this),this.toggler.setAttribute("aria-expanded","false"),this.__cleanDocListner()}},{key:"openDropdown",value:function(){this.dispatcher.dispatchEvent("beforeShow",this),this.target.classList.add(this.shownClass),this.dispatcher.dispatchEvent("afterShow",this),this.toggler.setAttribute("aria-expanded","true"),this.__attachDocListener()}},{key:"__resolveElement",value:function(e,t,n){return this.__isObject(e)?e:t.querySelector(n)}},{key:"__isObject",value:function(e){return"object"===t(e)&&null!==e}},{key:"__toggleDropdown",value:function(){this.isOpen()?this.closeDropdown():this.openDropdown()}},{key:"__attachDocListener",value:function(){var e=this;this.isOpen()&&(this.currentDocumentListener&&this.__cleanDocListner(),this.currentDocumentListener=function(t){t.target&&t.target!==e.toggler&&t.target.parentElement!==e.toggler&&e.closeDropdown()},window.document.addEventListener("click",this.currentDocumentListener))}},{key:"__cleanDocListner",value:function(){document.removeEventListener("click",this.currentDocumentListener),this.currentDocumentListener=null}},{key:"__init",value:function(){this.toggler.addEventListener("click",this.__toggleDropdown.bind(this))}}]),e}(),x='[data-pl-globalnav-role="navbar"]',R='[data-pl-globalnav-role="close"]',L='[data-pl-globalnav-role="open"]',D='[data-pl-globalnav-role="menu"]',O="data-pl-globalnav-content-id",A='[data-pl-globalnav-role="backdrop"]',C='[data-pl-globalnav-role="panel"]',S="is-open",N="is-panel-open",I="is-selected",M=function(){function e(t,i){n(this,e),o(this,"globalNav",void 0),o(this,"domElements",void 0),o(this,"__dispatcher",void 0),o(this,"__eventDisposers",void 0),this.globalNav=t,this.domElements={navbar:m(i&&i.globalNav?i.globalNav:null,{parent:this.globalNav,selector:x,throwIfNotFound:"Uxpl.GlobalNav could not be initilized because navbar element was not found ([".concat(x,"])")}),close:m(i&&i.close?i.close:null,{parent:this.globalNav,selector:R}),open:m(i&&i.open?i.open:null,{parent:this.globalNav,selector:L}),menu:m(i&&i.menu?i.menu:null,{parent:this.globalNav,selector:D,throwIfNotFound:"Uxpl.GlobalNav could not be initilized because menu list element was not found ([".concat(D,"])")}),backdrop:m(i&&i.backdrop?i.backdrop:null,{parent:this.globalNav,selector:A}),panel:m(i&&i.panel?i.panel:null,{parent:this.globalNav,selector:C})},this.__dispatcher=new f,this.__attachListeners(),this.__screenWidthChangeHandler()}return s(e,[{key:"addEventListener",value:function(e,t){this.__dispatcher.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.__dispatcher.removeEventListener(e,t)}},{key:"destroy",value:function(){this.globalNav=null,this.domElements=null,this.__dispatcher.clearAll(),this.__eventDisposers.forEach((function(e){return e()}))}},{key:"isPanelOpen",value:function(){return this.globalNav&&this.globalNav.classList&&this.globalNav.classList.contains(N)}},{key:"close",value:function(){this.__clearActiveItem(),this.__togglePanelContent(),this.globalNav.classList.toggle(N),y(this.domElements.panel,"aria-hidden"),y(this.domElements.backdrop,"aria-hidden")}},{key:"open",value:function(e){var t="["+O+'="'+e+'"]',n=m(null,{parent:this.domElements.navbar,selector:t});if(n){if(this.isPanelOpen()){var i=this.domElements.menu.querySelector(".".concat(I));this.__removeActiveState(i),y(i,"aria-expanded"),this.__togglePanelContent(n,i)}else this.__togglePanelContent(n),this.globalNav.classList.toggle(N),y(this.domElements.panel,"aria-hidden"),y(this.domElements.backdrop,"aria-hidden");this.__addActiveState(n),y(n,"aria-expanded")}else console.warn('Global Nav Component: could not find action with id "'.concat(e,'"'))}},{key:"__isBackdropOpen",value:function(){return this.domElements.backdrop&&this.domElements.backdrop.classList&&this.domElements.backdrop.classList.contains(S)}},{key:"__isPanelContentShown",value:function(e){return e&&e.classList&&e.classList.contains(S)}},{key:"__addActiveState",value:function(e){e.classList.add(I)}},{key:"__removeActiveState",value:function(e){e.classList.remove(I)}},{key:"__clearActiveItem",value:function(){var e=this.domElements.menu.querySelector(".".concat(I));null!==e&&(e.classList.remove(I),y(e,"aria-expanded"))}},{key:"__toggleVisibility",value:function(e,t){e&&(e.classList[t?"remove":"add"](S),e.setAttribute("aria-hidden",t?"true":"false"))}},{key:"__togglePanelContent",value:function(e,t){var n=this;if(this.domElements.panel){var i=[];if(e){var s=e.getAttribute(O),o=this.domElements.panel.querySelector("[ ".concat(O," = ").concat(s," ]"));i.push(o)}if(t||!e&&!t){var a=this.domElements.panel.querySelector("[ ".concat(O,"]")+".is-open");i.push(a)}i.forEach((function(e){e&&(n.__isPanelContentShown(e)?(n.__dispatcher.dispatchEvent("beforeHide",e),n.__toggleVisibility(e,n.__isPanelContentShown(e)),n.__dispatcher.dispatchEvent("afterHide",e)):(n.__dispatcher.dispatchEvent("beforeShow",e),n.__toggleVisibility(e,n.__isPanelContentShown(e)),n.__dispatcher.dispatchEvent("afterShow",e)))}))}}},{key:"__menuActionHandler",value:function(e){if(e===this.domElements.menu.querySelector(".".concat(I)))this.close();else{var t=e.getAttribute(O);this.open(t)}}},{key:"__screenWidthChangeHandler",value:function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=this.domElements.open.getAttribute("aria-hidden"),n=this.domElements.menu.getAttribute("aria-hidden");e>1023?("false"==t&&y(this.domElements.open,"aria-hidden"),"true"==n&&y(this.domElements.menu,"aria-hidden")):("true"==t&&y(this.domElements.open,"aria-hidden"),"false"==n&&y(this.domElements.menu,"aria-hidden"))}},{key:"__attachListeners",value:function(){var e=this;this.__eventDisposers=[],this.__eventDisposers.push(p(this.domElements.menu,"click","[".concat(O,"]"),this.__menuActionHandler.bind(this))),this.domElements.backdrop&&this.__eventDisposers.push(v(this.domElements.backdrop,"click",this.close.bind(this))),this.domElements.close&&this.__eventDisposers.push(v(this.domElements.close,"click",(function(){e.globalNav.classList.toggle(N),y(e.domElements.panel,"aria-hidden"),y(e.domElements.open,"aria-hidden"),y(e.domElements.close,"aria-hidden"),y(e.domElements.menu,"aria-hidden"),e.__clearActiveItem(),e.__togglePanelContent()}))),this.domElements.open&&this.__eventDisposers.push(v(this.domElements.open,"click",(function(){e.globalNav.classList.toggle(N),y(e.domElements.panel,"aria-hidden"),y(e.domElements.open,"aria-hidden"),y(e.domElements.close,"aria-hidden"),y(e.domElements.menu,"aria-hidden");var t=e.domElements.menu.querySelector("[".concat(O,"]"));e.__addActiveState(t),e.__togglePanelContent(t)}))),this.__eventDisposers.push(v(window,"resize",this.__screenWidthChangeHandler.bind(this)))}}]),e}(),q='[data-pl-leftnav-role="menu"]',P='[data-pl-leftnav-role="collapse"]',T='[data-pl-leftnav-role="dropdown"]',U='[data-pl-leftnav-role="menu-link"]',H='[data-pl-leftnav-role="menu-item"]',j='[data-pl-leftnav-role="nested-menu"]',V="is-active",z="is-open",F="is-collapsed",W="is-scrollable",G=function(){function e(t){n(this,e),o(this,"__domElements",void 0),o(this,"__destroyListeners",void 0),this.__initElements(t),this.__domElements.collapse&&(this.__destroyListeners=v(this.__domElements.collapse,"click",this.__handleCollapse.bind(this)))}return s(e,[{key:"destroy",value:function(){this.__domElements=null,this.__destroyListeners&&this.__destroyListeners()}},{key:"__handleCollapse",value:function(){var e=this.__domElements.layoutRoot;e&&e.classList.toggle(F)}},{key:"__initElements",value:function(e){var t=e.layoutRoot,n=t?m(e.collapse,{parent:t,selector:P}):null;this.__domElements={layoutRoot:t,collapse:n}}}]),e}();function K(e){null!==e&&(e.classList.remove(V),e.classList.contains(z)&&(e.classList.remove(z),y(e,"aria-expanded")))}var B=function(){function e(t){n(this,e),o(this,"__domElements",void 0),o(this,"__eventDisposers",void 0),this.__domElements={menu:t},this.__attachListeners()}return s(e,[{key:"destroy",value:function(){this.__domElements=null,this.__eventDisposers.forEach((function(e){return e()}))}},{key:"__clearActiveItems",value:function(){var e=this.__domElements.menu.querySelectorAll(".".concat(V));e.length&&e.forEach(K)}},{key:"__activateMenuItem",value:function(e){this.__clearActiveItems();var t=e.closest(j);if(t){var n=e.closest(H);n.classList.add(V),(n=t.closest(H)).classList.add(V),n.classList.add(z),y(n,"aria-expanded")}else{var i=e.closest(H);i.classList.add(V),i.querySelector(j)&&(i.classList.add(z),y(i,"aria-expanded"))}}},{key:"__dropdownClickHandler",value:function(e){var t=e.closest(H);t.classList.toggle(z),y(t,"aria-expanded")}},{key:"__attachListeners",value:function(){this.__eventDisposers=[],this.__eventDisposers.push(p(this.__domElements.menu,"click",U,this.__activateMenuItem.bind(this))),this.__eventDisposers.push(p(this.__domElements.menu,"click",T,this.__dropdownClickHandler.bind(this))),this.__eventDisposers.push(v(this.__domElements.menu,"scroll",(function(e){var t=e.target;t.classList.add(W),setTimeout((function(){var e=t.scrollHeight-t.clientHeight<=t.scrollTop+1;(0==t.scrollTop||e)&&t.classList.remove(W)}),600)})))}}]),e}(),Y=function(){function e(t){if(n(this,e),o(this,"layout",void 0),o(this,"menu",void 0),!(t=t||{}).useLayoutRoot&&!t.useMenu)throw new Error("".concat("Uxpl.LeftNav: Could not initialize Uxpl.LeftNav."," You need to provide either the menu element or the layoutRoot element"));var i=t.useLayoutRoot,s=t.useMenu;i&&(this.layout=new G({layoutRoot:i,collapse:t.collapse}),s=m(s,{parent:i,selector:q})),this.menu=new B(s)}return s(e,null,[{key:"createWithLayout",value:function(t){return new e({useLayoutRoot:t})}},{key:"createMenuOnly",value:function(t){return new e({useMenu:t})}}]),s(e,[{key:"destroy",value:function(){this.menu&&this.menu.destroy(),this.layout&&this.layout.destroy()}}]),e}(),J='data-pl-combobox-role="menu"',Q='data-pl-combobox-role="input"',X='data-pl-combobox-role="dropdown"',Z='data-pl-combobox-role="toggle"',$="data-pl-combobox-option",ee="pl-select-menu__item",te="is-hovered",ne="is-dropdown-shown",ie="is-selected",se="is-disabled",oe="pl-select-menu__empty-message",ae=0,le=function(e){a(i,e);var t=d(i);function i(e,s){var a;return n(this,i),o(c(a=t.call(this)),"isOptionEqual",void 0),o(c(a),"ref",void 0),o(c(a),"selected",void 0),o(c(a),"options",void 0),o(c(a),"optionMap",new Map),o(c(a),"activeIndex",-1),o(c(a),"uniqueId",void 0),o(c(a),"emptyMessage",void 0),a.ref=e,s=s||{},a.options=s.options||[],a.selected=s.selected,a.isOptionEqual=s.isOptionEqual,a.emptyMessage=s.emptyMessage,a.uniqueId="".concat(ae++),a.ref.setAttribute("role","listbox"),a.init(),a}return s(i,[{key:"getSelected",value:function(){return this.selected}},{key:"setSelected",value:function(e){var t=this;this.selected=e,this.queryOptionElements().forEach((function(n){n.classList.remove(ie),n.setAttribute("aria-selected","false"),t.isOptionEqual(t.optionMap.get(n.getAttribute("id")),e)&&(n.classList.add(ie),n.setAttribute("aria-selected","true"))}))}},{key:"setOptions",value:function(e){this.activeIndex=-1,this.options=e,this.renderOptions()}},{key:"isDisplayable",value:function(){return this.options&&this.options.length>0||!!this.emptyMessage}},{key:"handleKey",value:function(e){var t=this.getOptionElementAt(this.activeIndex),n=t;switch(e.key){case"Up":case"ArrowUp":if(this.activeIndex>0){var i=this.getNextActive("up");i&&(this.activeIndex=i.index,n=i.element)}e.preventDefault();break;case"Down":case"ArrowDown":if(this.activeIndex<this.optionMap.size){var s=this.getNextActive("down");s&&(this.activeIndex=s.index,n=s.element)}e.preventDefault();break;case"Enter":return this.handleClick({element:this.getOptionElementAt(this.activeIndex),event:e}),void e.preventDefault()}t!==n&&(t&&t.classList.remove(te),n&&n.classList.add(te),this.eventDispatcher.dispatchEvent("active",{element:n,option:this.optionMap.get(n.getAttribute("id"))}))}},{key:"destroy",value:function(){h(l(i.prototype),"destroy",this).call(this),this.optionMap.clear()}},{key:"getOptionElementAt",value:function(e){return this.queryOptionElements()[e]}},{key:"queryOptionElements",value:function(){return this.ref.querySelectorAll("[".concat($,"]"))}},{key:"getNextActive",value:function(e){var t,n=this.queryOptionElements(),i=this.activeIndex;do{if((t=n[i+="up"===e?-1:1])&&"true"!==t.getAttribute("aria-disabled"))return{index:i,element:t}}while(t);return null}},{key:"handleClick",value:function(e){var t=e.element,n=e.event,i=this.optionMap.get(t.getAttribute("id"));i&&!i.disabled&&(this.eventDispatcher.dispatchEvent("selection",i),n.preventDefault())}},{key:"renderOptions",value:function(){var e=this,t=document.createDocumentFragment();this.optionMap.clear(),this.clearOptions(),this.options&&this.options.length>0?this.options.forEach((function(n,i){var s=e.makeOptionNodeId("".concat(i)),o=e.createOptionNode(n,s);e.optionMap.set(s,n),t.appendChild(o)})):this.emptyMessage&&t.appendChild(this.createEmptyMessageNode()),this.ref.appendChild(t)}},{key:"makeOptionNodeId",value:function(e){return"pl-combobox-option-c".concat(this.uniqueId,"-").concat(e)}},{key:"createOptionNode",value:function(e,t){var n=document.createElement("li");return n.setAttribute("id",t),n.innerHTML=e.text,n.setAttribute($,""),n.setAttribute("data-pl-combobox-option-value",e.value),n.setAttribute("role","option"),n.classList.add(ee),this.selected&&this.isOptionEqual(this.selected,e)&&(n.classList.add(ie),n.setAttribute("aria-selected","true")),e.disabled&&(n.setAttribute("aria-disabled","true"),n.classList.add(se)),n}},{key:"createEmptyMessageNode",value:function(){var e=document.createElement("li");return e.innerHTML=this.emptyMessage,e.classList.add(oe),e}},{key:"clearOptions",value:function(){for(;this.ref.firstChild;)this.ref.removeChild(this.ref.firstChild)}},{key:"init",value:function(){var e=this;this.eventDisposers.push(p(this.ref,"click","[data-pl-combobox-option]",(function(t,n){n.preventDefault(),e.handleClick({element:t,event:n})}))),this.renderOptions()}}]),i}(g),re=function(e,t){return e===t},ce=function(e){a(i,e);var t=d(i);function i(e,s){var a;if(n(this,i),o(c(a=t.call(this)),"comboboxRef",void 0),o(c(a),"listbox",void 0),o(c(a),"domRefs",void 0),o(c(a),"touched",!0),o(c(a),"keepUserInput",void 0),o(c(a),"isOpen",!1),o(c(a),"inputTextOnOpen",""),o(c(a),"hasSelectionChanged",void 0),o(c(a),"shouldCloseOnClickOutside",void 0),!e)throw new Error("Uxpl.Combobox could not be initialized. Reason: required root element not provided");return a.comboboxRef=e,s=s||{},a.shouldCloseOnClickOutside=!s.ignoreClickOutside,a.keepUserInput=s.keepUserInput,a.domRefs={listRef:b({parent:a.comboboxRef,selector:"[".concat(J,"]"),throwIfNotFound:"Uxpl.Combobox could not be initialized because the listbox element was not found ([".concat(J,"])")}),dropdownRef:b({parent:a.comboboxRef,selector:"[".concat(X,"]"),throwIfNotFound:"Uxpl.Combobox could not be initialized because the dropdown element was not found ([".concat(X,"])")}),togglerRef:b({parent:a.comboboxRef,selector:"[".concat(Z,"]")}),inputRef:b({parent:a.comboboxRef,selector:"[".concat(Q,"]"),throwIfNotFound:"Uxpl.Combobox could not be initialized because the input element was not found ([".concat(Q,"])")})},a.listbox=new le(a.domRefs.listRef,{options:s.options,selected:s.selected,emptyMessage:s.emptyMessage,isOptionEqual:s.isOptionEqual||re}),a.attachListeners(),s.selected&&a.setSelected(s.selected),a}return s(i,[{key:"setSelected",value:function(e){this.domRefs.inputRef.value=e.text||"",this.listbox.setSelected(e),this.hasSelectionChanged=!0,this.eventDispatcher.dispatchEvent("inputChange",{combobox:this,value:this.domRefs.inputRef.value})}},{key:"getSelected",value:function(){return this.listbox.getSelected()}},{key:"getInputValue",value:function(){return this.domRefs.inputRef.value}},{key:"setInputValue",value:function(e){this.domRefs.inputRef.value=e}},{key:"open",value:function(){this.eventDispatcher.dispatchEvent("beforeOpen",{combobox:this}),this.isOpen=!0,document.activeElement!==this.domRefs.inputRef&&this.domRefs.inputRef.focus(),this.inputTextOnOpen=this.domRefs.inputRef.value,this.hasSelectionChanged=!1,this.comboboxRef.setAttribute("aria-expanded","true"),this.isOpen&&this.matchListboxVisibility(),this.eventDispatcher.dispatchEvent("afterOpen",{combobox:this})}},{key:"close",value:function(){this.eventDispatcher.dispatchEvent("beforeClose",{combobox:this}),this.isOpen=!1,this.hasSelectionChanged||this.keepUserInput||(this.domRefs.inputRef.value=this.inputTextOnOpen,this.eventDispatcher.dispatchEvent("inputChange",{combobox:this,value:this.domRefs.inputRef.value})),this.comboboxRef.classList.remove(ne),this.comboboxRef.setAttribute("aria-expanded","false"),this.domRefs.inputRef.setAttribute("aria-activedescendant",""),this.eventDispatcher.dispatchEvent("afterClose",{combobox:this})}},{key:"updateOptions",value:function(e){this.listbox.setOptions(e),this.isOpen&&this.matchListboxVisibility()}},{key:"isTouched",value:function(){return this.touched}},{key:"enable",value:function(){this.domRefs.inputRef&&(this.domRefs.inputRef.removeAttribute("disabled"),this.domRefs.inputRef.removeAttribute("aria-disabled")),this.domRefs.dropdownRef&&this.domRefs.dropdownRef.removeAttribute("aria-disabled"),this.comboboxRef.classList.remove(se),this.eventDispatcher.dispatchEvent("enabledChange",{combobox:this,enabled:!1})}},{key:"disable",value:function(){this.domRefs.inputRef&&(this.domRefs.inputRef.setAttribute("disabled","true"),this.domRefs.inputRef.setAttribute("aria-disabled","true")),this.domRefs.dropdownRef&&this.domRefs.dropdownRef.setAttribute("aria-disabled","true"),this.comboboxRef.classList.add(se),this.eventDispatcher.dispatchEvent("enabledChange",{combobox:this,enabled:!1})}},{key:"destroy",value:function(){h(l(i.prototype),"destroy",this).call(this),this.listbox.destroy()}},{key:"handleClickOutside",value:function(e){this.isOpen&&(Object.values(this.domRefs).find((function(t){return t&&t.contains(e)}))||this.close())}},{key:"handleUserInput",value:function(e){var t=this.domRefs.inputRef.value;!this.isOpen&&t.length>0&&(this.open(),e.preventDefault()),this.eventDispatcher.dispatchEvent("search",{value:t,combobox:this}),this.eventDispatcher.dispatchEvent("inputChange",{value:t,combobox:this})}},{key:"handleKey",value:function(e){if(!this.isOpen&&("Down"===e.key||"ArrowDown"===e.key))return e.preventDefault(),void this.open();switch(e.key){case"Up":case"ArrowUp":case"Down":case"ArrowDown":case"Enter":return void(this.isOpen&&this.listbox.handleKey(e));case"Esc":case"Escape":case"Tab":return void this.close()}}},{key:"ensureOptionInView",value:function(e){var t=this.domRefs.dropdownRef,n=t.scrollTop,i=n+t.clientHeight,s=e.offsetTop,o=s+e.clientHeight;s<n?t.scrollTop-=n-s:o>i&&(t.scrollTop+=o-i)}},{key:"matchListboxVisibility",value:function(){this.listbox.isDisplayable()?this.comboboxRef.classList.add(ne):this.comboboxRef.classList.remove(ne)}},{key:"attachListeners",value:function(){var e=this;this.listbox.addEventListener("active",(function(t){t.element?(e.domRefs.inputRef.setAttribute("aria-activedescendant",t.element.id),e.ensureOptionInView(t.element)):e.domRefs.inputRef.setAttribute("aria-activedescendant","")})),this.listbox.addEventListener("selection",(function(t){e.close(),e.eventDispatcher.dispatchEvent("selected",{combobox:e,selected:t})})),this.eventDisposers.push(v(this.comboboxRef,"keydown",(function(t){return e.handleKey(t)}))),this.domRefs.togglerRef&&this.eventDisposers.push(v(this.domRefs.togglerRef,"click",(function(t){e.isOpen?e.close():(e.open(),t.preventDefault())}))),this.eventDisposers.push(v(this.domRefs.inputRef,"focus",(function(){e.isOpen||e.open()}))),this.eventDisposers.push(v(this.domRefs.inputRef,"input",(function(t){return e.handleUserInput(t)}))),this.eventDisposers.push(v(this.domRefs.inputRef,"blur",(function(){e.touched=!0,e.eventDispatcher.dispatchEvent("touched",{combobox:e})}))),this.shouldCloseOnClickOutside&&this.eventDisposers.push(v(document,"click",(function(t){e.handleClickOutside(t.target)})))}}]),i}(g);e.Combobox=ce,e.Dropdown=w,e.GlobalNav=M,e.LeftNav=Y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=uxpl.umd.min.js.map
